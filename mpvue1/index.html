<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>mpvue (一) - Blog - 努力的人生</title>
	<meta name="description" content="mpvue">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-touch-icon-114x114.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#311e3e">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#311e3e">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#311e3e">
	
	
	
	
	<!-- Google Fonts 1
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">-->
	
	
	
	
	
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="/assets/css/main.css">

	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>  
	
	
	<!--百度统计-->
	<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "https://hm.baidu.com/hm.js?660ee541ef48f4a94f8a59dd0f9e64ae";
		  var s = document.getElementsByTagName("script")[0]; 
		  s.parentNode.insertBefore(hm, s);
		})();
	</script>
	
	
	
	
	
	
	
	<!--谷歌统计-->
	<!-- Global site tag (gtag.js) - Google Analytics 
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-113644888-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-113644888-1');
	</script>-->

</head>

<body>
  <div class="flex-container">
  <header class="main-header">
  <div class="wrapper">
    <div class="header-flex">
      <div class="menu-icon-container">
        <span class="menu-icon"><i class="fa fa-bars" aria-hidden="true"></i></span>
      </div>
      <nav class="main-nav">
        <span class="menu-icon-close"><i class="fa fa-times" aria-hidden="true"></i></span>
        <!--<ul style="height:800px;overflow-y:scroll;overflow-y:auto;"> -->
        <ul>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/"  data-hover="所有">所有(52)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/markdown"  data-hover="Markdown">Markdown(4)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/essays"  data-hover="随笔">随笔(2)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/jekyll"  data-hover="Jekyll">Jekyll(1)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/vue"  data-hover="Vue">Vue(3)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/react"  data-hover="React">React(2)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/anglur"  data-hover="Anglur">Anglur(1)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/youman"  data-hover="构建工具">构建工具(1)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/nginx2"  data-hover="Nginx2">Nginx2(1)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/python"  data-hover="Python">Python(2)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/abouttest"  data-hover="测试相关">测试相关(6)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/aboutweb"  data-hover="前端相关">前端相关(2)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/wechat"  data-hover="Wechat">Wechat(20)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/other"  data-hover="其它">其它(7)</a></li>
		 
          <!--<li style="margin-bottom:200px;"><a href="/about">About(7)</a></li>-->
        </ul>
      </nav>
      <p class="logo"><a href="/">nldrs</a></p>


		<div class="navbar-container">

		<div class="search-icon"><a><i class="fa fa-search" aria-hidden="true"></i></a></div>

			<div class="navbar-menu">
			   
				<a href="/"  data-hover="Home">Home</a>  <!--title="访问 Home"-->
				<!--<a href="/">Home</a>-->
					
				<a href="/about"  data-hover="About">About</a>  <!--title="访问 About"-->
				<!--<a href="/about">About</a>-->
					
			</div>


			<div class="navbar-mobile-menu" onclick="">
				<span class="icon-menu cross"><span class="middle"></span></span>
				<ul>
				   
					 <li><a href="/"data-hover="Home">Home</a></li>  <!--title="访问 Home"-->
					 <!--<li><a href="/">Home</a></li>-->
				   
					 <li><a href="/about"data-hover="About">About</a></li>  <!--title="访问 About"-->
					 <!--<li><a href="/about">About</a></li>-->
				   
				</ul>
			</div>



		</div>

    <!--  <div class="search-icon-container">
	    <a href="/" style="text-decoration: none; color: inherit;margin-right:20px;">Home</a>
		<a href="/about" style=" text-decoration: none; color: inherit;margin-right:20px;">About</a>
        <span class="search-icon"><a><i class="fa fa-search" aria-hidden="true"></i></a></span>
      </div> -->


    </div>
  </div>
</header> <!-- End Header -->

  <article class="article-page">
    <div class="page-image">
      <div class="cover-image" style="background: url(/assets/img/lpf-18.jpg) center no-repeat; background-size: cover;"></div>
    </div>
    <div class="wrapper">
      <div class="page-content">
        <div class="header-page">
          <h1 class="page-title">mpvue (一)</h1>
          <div class="page-date"><time datetime="2018-09-04 08:12:00 +0800">2018, Sep 04</time>
		  <span id="busuanzi_container_page_pv"> | 访问量：<span id="busuanzi_value_page_pv"></span> 次</span>
		  </div>
        </div>
        <h1 id="mpvue">mpvue</h1>

<p>创建第一个基于mpvue的小程序项目代码
花了点时间装好了必要的开发环境，下面我们就来创建我们的第一个mpvue小程序项目。这里将用到前面已安装的vue-cli：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">vue</span> <span class="nx">init</span> <span class="nx">mpvue</span><span class="o">/</span><span class="nx">mpvue</span><span class="o">-</span><span class="nx">quickstart</span> <span class="nx">firstapp</span>
</code></pre></div></div>
<p>命令行将一步步的引导我们选择或填写项目的配置信息，如果你还不太明白这些内容的含义，可以先直接全部按回车：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">?</span> <span class="nx">Project</span> <span class="nx">name</span> <span class="nx">firstapp</span>
<span class="p">?</span> <span class="nx">wxmp</span> <span class="nx">appid</span> <span class="nx">touristappid</span>
<span class="p">?</span> <span class="nx">Project</span> <span class="nx">description</span> <span class="nx">A</span> <span class="nx">Mpvue</span> <span class="nx">project</span>
<span class="p">?</span> <span class="nx">Author</span> <span class="nx">kevinzhang</span> <span class="o">&lt;</span><span class="nx">kevin</span><span class="p">.</span><span class="nx">zhang</span><span class="p">@</span><span class="nd">moredist</span><span class="p">.</span><span class="nx">com</span><span class="o">&gt;</span>
<span class="p">?</span> <span class="nx">Vue</span> <span class="nx">build</span> <span class="nx">runtime</span>
<span class="p">?</span> <span class="nx">Use</span> <span class="nx">Vuex</span><span class="p">?</span> <span class="nx">Yes</span>
<span class="p">?</span> <span class="nx">Use</span> <span class="nx">ESLint</span> <span class="nx">to</span> <span class="nx">lint</span> <span class="nx">your</span> <span class="nx">code</span><span class="p">?</span> <span class="nx">Yes</span>
<span class="p">?</span> <span class="nx">Pick</span> <span class="nx">an</span> <span class="nx">ESLint</span> <span class="nx">preset</span> <span class="nx">Standard</span>
<span class="p">?</span> <span class="err">小程序测试，敬请关注最新微信开发者工具的“测试报告”功能</span> 

   <span class="nx">vue</span><span class="o">-</span><span class="nx">cli</span> <span class="err">·</span> <span class="nx">Generated</span> <span class="s2">"firstapp"</span><span class="p">.</span>

   <span class="nx">To</span> <span class="kd">get</span> <span class="nx">started</span><span class="p">:</span>
   
     <span class="nx">cd</span> <span class="nx">firstapp</span>
     <span class="nx">npm</span> <span class="nx">install</span>
     <span class="nx">npm</span> <span class="nx">run</span> <span class="nx">dev</span>
</code></pre></div></div>
<p>这个过程vue-cli主要是先从远程的代码仓库中下载了一份注册名为mpvue/mpvue-quickstart的模板代码，然后根据开发者在命令行提示过程中输入的信息，生成一份经过配置后的代码。</p>

<p>这份代码暂时还运行不起来，因为它还缺少依赖的库，我们需要执行以下命令进行依赖库的安装：</p>

<h2 id="目录结构">目录结构</h2>

<hr />

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">firstapp</span>
<span class="err">├──</span> <span class="kr">package</span><span class="p">.</span><span class="nx">json</span>
<span class="err">├──</span> <span class="nx">project</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">json</span>       
<span class="err">├──</span> <span class="kr">static</span>            
<span class="err">├──</span> <span class="nx">src</span>
<span class="err">│</span>    <span class="err">├──</span> <span class="nx">components</span>
<span class="err">│</span>    <span class="err">├──</span> <span class="nx">pages</span>
<span class="err">│</span>    <span class="err">├──</span> <span class="nx">utils</span>
<span class="err">│</span>    <span class="err">├──</span> <span class="nx">App</span><span class="p">.</span><span class="nx">vue</span>
<span class="err">│</span>    <span class="err">└──</span> <span class="nx">main</span><span class="p">.</span><span class="nx">js</span>
<span class="err">├──</span> <span class="nx">config</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="nx">index</span><span class="p">.</span><span class="nx">js</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="nx">dev</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">js</span>
<span class="err">│</span>   <span class="err">└──</span> <span class="nx">prod</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">js</span>
<span class="err">└──</span> <span class="nx">build</span>

</code></pre></div></div>

<p>1）config目录
config目录下包含了用于开发和生产环境下的不同配置，dev.env.js用于开发环境，prod.env.js用于生产环境，你可以将开发阶段和生产阶段不一样的信息（如后台API的url地址等）配置到这两个文件中去，然后在代码中以变量的形式进行引用。例如，这2个文件中分别配置了不同的API_BASE_URL值：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// dev.env.js</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">merge</span><span class="p">(</span><span class="nx">prodEnv</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">NODE_ENV</span><span class="p">:</span> <span class="s1">'"development"'</span><span class="p">,</span>
  <span class="na">API_BASE_URL</span><span class="p">:</span> <span class="s1">'"http://127.0.0.1:8080/api"'</span>
<span class="p">})</span>

<span class="c1">// prod.env.js</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">NODE_ENV</span><span class="p">:</span> <span class="s1">'"production"'</span><span class="p">,</span>
  <span class="na">API_BASE_URL</span><span class="p">:</span> <span class="s1">'"https://www.my-domain.com/api"'</span>
<span class="p">}</span>

</code></pre></div></div>

<p>那你在编写请求后端API的代码时，你就可以使用这个环境配置，像这样：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">baseURL</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">API_BASE_URL</span>
<span class="nx">wx</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">baseURL</span><span class="p">}</span><span class="s2">/products`</span>
<span class="p">})</span>
</code></pre></div></div>

<p>这样一来，开发阶段和上线发布阶段的环境可以清楚的区分开来。</p>

<p>2）src目录
src目录是我们主要进行小程序功能编写的地方。默认生成的demo代码为我们创建了几个子目录：components、pages和utils，还有2个文件：App.vue和main.js。其实它们都不是必须的，可以按照自己的风格进行定义和配置。不过默认创建的这个结构基本上是一个约定俗成的结构了，比较易于理解，所以我们可以遵循这个结构进行开发。</p>

<p>components：在实际开发中，我们可以尽量将界面上可复用的部分，提取成vue组件放入该目录</p>

<p>pages：存放小程序的页面。请遵循每个小程序页面放入一个单独子目录的组织形式</p>

<p>utils：可选（可删）。可以将代码中一些公用工具函数组织成模块放入该目录下</p>

<p>可新建其他目录，存放你希望组织起来的代码。比如公用的业务逻辑代码、请求后台API的代码等等</p>

<p>main.js + App.vue：这两个是入口文件，相当于原生小程序框架中的app.json和app.js的复合体。</p>

<h2 id="整理">整理</h2>
<hr />

<p>为了清楚起见，我们将要对vue-cli生成的代码做一个清理工作，具体如下：</p>

<p>删掉src/components、src/pages、src/utils三个目录下的所有代码文件</p>

<p>将src/App.vue文件中的内容重置成：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{}</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">style</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="sr">/style</span><span class="err">&gt;
</span></code></pre></div></div>

<p>将src/main.js文件中的内容重置成：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Vue</span> <span class="k">from</span> <span class="s1">'vue'</span>
<span class="k">import</span> <span class="nx">App</span> <span class="k">from</span> <span class="s1">'./App'</span>

<span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span>
<span class="nx">App</span><span class="p">.</span><span class="nx">mpType</span> <span class="o">=</span> <span class="s1">'app'</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">$mount</span><span class="p">()</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">config</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">pages</span><span class="p">:</span> <span class="p">[],</span>
    <span class="na">window</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">backgroundTextStyle</span><span class="p">:</span> <span class="s1">'light'</span><span class="p">,</span>
      <span class="na">navigationBarBackgroundColor</span><span class="p">:</span> <span class="s1">'#fff'</span><span class="p">,</span>
      <span class="na">navigationBarTitleText</span><span class="p">:</span> <span class="s1">'第一个小程序'</span><span class="p">,</span>
      <span class="na">navigationBarTextStyle</span><span class="p">:</span> <span class="s1">'black'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>至此，我们的代码就成了一个小程序页面都没有的初始状态。</p>

<p>程序入口
学习过使用小程序原生框架开发的朋友都知道，一个小程序的入口应该包含这三个最重要的部分：
1）app.json
2）app.js
3）首页</p>

<p>有了这三个部分，才能成功运行起一个最简单的小程序。</p>

<p>app.json
app.json是小程序的全局配置文件，其包含了小程序的页面文件路径配置、窗口的全局样式信息、底部选项卡式菜单栏的配置，以及一些小程序网络超时的配置等等。</p>

<p>其实在src/main.js中，我们就可以完整的进行这些信息的配置，具体可以查看该文件的最底部代码：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="c1">// 这部分相当于原生小程序的 app.json</span>
  <span class="na">config</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">pages</span><span class="p">:</span> <span class="p">[],</span>
    <span class="na">window</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">backgroundTextStyle</span><span class="p">:</span> <span class="s1">'light'</span><span class="p">,</span>
      <span class="na">navigationBarBackgroundColor</span><span class="p">:</span> <span class="s1">'#fff'</span><span class="p">,</span>
      <span class="na">navigationBarTitleText</span><span class="p">:</span> <span class="s1">'第一个小程序'</span><span class="p">,</span>
      <span class="na">navigationBarTextStyle</span><span class="p">:</span> <span class="s1">'black'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>在该代码中通过export default导出的对象的config属性下的值，就是这些小程序的配置信息了。</p>

<p>app.js
app.js中包含了小程序的各种原生生命周期方法，如onLaunch、onShow等等。而在mpvue中，它使用了一个简单的Vue组件App.vue来实现等价的功能。我们在这个App.vue组件中可以编写小程序的生命周期方法（通常使用Vue的生命周期方法，但也兼容原生的生命周期方法），也可以在其中加入小程序的全局样式（等价于原生方式下的app.wxss）：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="cm">/* 这部分相当于原生小程序的 app.js */</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">created</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'miniapp created!!!'</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">style</span><span class="o">&gt;</span>
<span class="cm">/* 这部分相当于原生小程序的 app.wxss */</span>
<span class="p">.</span><span class="nx">container</span> <span class="p">{</span>
  <span class="nx">background</span><span class="o">-</span><span class="na">color</span><span class="p">:</span> <span class="err">#</span><span class="nx">cccccc</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/style</span><span class="err">&gt;
</span></code></pre></div></div>

<p>接着，这个App.vue组件被src/main.js引入并被设置了一个mpType的属性值，其值为app。这个值是为了与后面要讲的小程序页面组件所区分开来，因为小程序页面组件和这个App.vue组件的写法和引入方式是一致的，为了区分两者，需要设置mpType值。引入这个App.vue组件后，会用它作为参数来创建一个Vue的实例，并调用$mount()方法加载。下面是这个过程的关键代码行</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">App</span><span class="p">.</span><span class="nx">mpType</span> <span class="o">=</span> <span class="s1">'app'</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">$mount</span><span class="p">()</span>
</code></pre></div></div>

<p>首页、以及其他页面
每个小程序都需要至少有一个页面，第一个展示的页面被叫做首页。因为前面已经把所有的页面代码都删完了，所以我们现在要新建一个首页。在src/pages目录下，我们新建一个名为index的子目录（请遵循每个页面放入一个子目录的良好习惯），然后在该子目录下，新建2个文件：一个用于实现页面主体功能的index.vue组件，另一个则用于将这个页面组件生成Vue实例并加载的main.js。以后的每一个mpvue页面组件都会拥有这样的结构。然后在main.js中编写如下代码，非常简单的一段代码，它的功能是引入index.vue并创建Vue实例：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Vue</span> <span class="k">from</span> <span class="s1">'vue'</span>
<span class="k">import</span> <span class="nx">App</span> <span class="k">from</span> <span class="s1">'./index'</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">$mount</span><span class="p">()</span>
</code></pre></div></div>

<p>当然了，你也可以像在src/main.js中一样去导出一个页面级别的配置，因为小程序的每个页面都可以有一些单独的配置：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Vue</span> <span class="k">from</span> <span class="s1">'vue'</span>
<span class="k">import</span> <span class="nx">App</span> <span class="k">from</span> <span class="s1">'./index'</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">$mount</span><span class="p">()</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">config</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">// 注意，页面级可配置属性相当于只是`src/main.js`中配置里的`window`部分</span>
    <span class="s2">"navigationBarTitleText"</span><span class="p">:</span> <span class="s2">"文章列表页面"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>接着，我们需要实现index.vue页面组件，它的写法是最典型的Vue组件写法。</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span> <span class="kd">class</span><span class="o">=</span><span class="s2">"container"</span> <span class="p">@</span><span class="nd">click</span><span class="o">=</span><span class="s2">"clickHandle"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="kd">class</span><span class="o">=</span><span class="s2">"message"</span><span class="o">&gt;&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">data</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">msg</span><span class="p">:</span> <span class="s1">'Hello'</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">clickHandle</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">msg</span> <span class="o">=</span> <span class="s1">'Clicked!!!!!!'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">style</span> <span class="nx">scoped</span><span class="o">&gt;</span>
<span class="p">.</span><span class="nx">message</span> <span class="p">{</span>
  <span class="na">color</span><span class="p">:</span> <span class="nx">red</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
  <span class="nx">text</span><span class="o">-</span><span class="na">align</span><span class="p">:</span> <span class="nx">center</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/style</span><span class="err">&gt;
</span></code></pre></div></div>
<p>可以看到，这个组件完全看不到小程序写法的影子，而是全部由Vue开发Web应用的写法来完成：数据绑定、事件处理、scoped局部样式、以及使用HTML标签来构建界面。这样最大化的保持和网页应用开发一致，减少了前端人员切换到小程序的学习理解成本，也为原先使用Vue开发的网页应用移植到小程序平台提供了降低迁移成本的可能。</p>

<p>模板部分我们通常可以用HTML标签来写，比如div、span等，它们会在编译的时候被自动转换成小程序的原生组件view、text之类；而那些小程序特有的组件如swiper、rich-text等，可以直接在模板中使用。</p>

<p>在原生小程序的页面（Page）中包含了很多页面的生命周期方法，如onLoad、onUnload、onShow、onHide、onPullDownRefresh等等，mpvue中推荐使用Vue组件生命周期方法，而像onPullDownRefresh、onReachBottom这类特殊功能的生命周期则需直接使用原生的。</p>

<p>回头再来看，当我们实现了这个index.vue页面组件后，其实还缺最后一个步骤，就是需要将这个页面组件指定为首页。如果我们的小程序只有一个页面的话，其实也可以省略这一步，因为mpvue会自动将src/pages目录下的页面组件路径添加到最终编译出来的小程序配置文件中去（可以打开dist/app.json文件观察一下）：</p>

<p>如果你期望的首页组件并没有被mpvue添加到第一个路径的话，就不会被当做首页显示。比如有多个页面，并在dist/app.json里生成的是下面的序列，则第一个pages/articles/main页面会被当做首页：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="s2">"pages"</span><span class="p">:</span> <span class="p">[</span>
  <span class="s2">"pages/articles/main"</span><span class="p">,</span>
  <span class="s2">"pages/authors/main"</span><span class="p">,</span>
  <span class="s2">"pages/index/main"</span><span class="p">,</span>
  <span class="s2">"pages/kickstart/main"</span>
<span class="p">]</span>
</code></pre></div></div>

<p>为了解决这种情况，我们需要显式的去指定首页。可以在src/main.js的配置里，加入这样一行配置信息：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">pages</span><span class="p">:</span> <span class="p">[</span>
  <span class="s1">'^pages/index/main'</span>
<span class="p">]</span>
</code></pre></div></div>

<p>注意：以上配置中指定为首页的路径前面有个^符号。</p>

<p>加入这行配置之后，pages/index/main总是会在最终生成的dist/app.json中排在第一个位置，成为首页。</p>

<p><a href="https://www.jianshu.com/p/2c363ea29cda">转载自简书大神’一斤代码’的博文</a></p>

        <div class="page-footer">
          <div class="page-tag">
            <span>Tags:</span>
            
            <a href="/tags#Wechat" class="tag">| Wechat</a>
            
            <a href="/tags#mpvue" class="tag">| mpvue</a>
            
          </div><!-- End Tags -->
          <div class="page-share">
            <span>Share:</span>
            <a href="https://twitter.com/intent/tweet?text=mpvue (一)&url=http://localhost:4000/mpvue1/" title="Share on Twitter" rel="nofollow" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
            <a href="https://facebook.com/sharer.php?u=http://localhost:4000/mpvue1/" title="Share on Facebook" rel="nofollow" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
            <a href="https://plus.google.com/share?url=http://localhost:4000/mpvue1/" title="Share on Google+" rel="nofollow" target="_blank"><i class="fa fa-google" aria-hidden="true"></i></a>
						
			<!-- JiaThis Button BEGIN -->
			<div class="jiathis_style_32x32">
				<a class="jiathis_button_weixin"></a>
				<a class="jiathis_button_tsina"></a>
				<!--<a class="jiathis_button_tqq"></a>
				<a class="jiathis_button_qzone"></a>
				<a class="jiathis_button_renren"></a>-->
				<a href="http://www.jiathis.com/share?uid=2157296" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
				<a class="jiathis_counter_style"></a>
			</div>
			<script type="text/javascript">var jiathis_config = {data_track_clickback:'true'};</script>
			<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=2157296" charset="utf-8"></script>
			<!-- JiaThis Button END -->
          </div><!-- End Share -->
		  
		
		  
		  <section>
			<!--<div style="background:#000;border-bottom: 1px solid #d9d9d9;"></div> -->

            <div class="content-play">
              <p><a href="javascript:void(0)" onclick="dashangToggle()" class="dashang" title="打赏，支持一下">打赏一下呗</a></p>
              <div class="hide_box-play"></div>
              <div class="shang_box-play">
                <a class="shang_close-play" href="javascript:void(0)" onclick="dashangToggle()" title="关闭"><img src="/assets/img/close.jpg" alt="取消" /></a>
                <div class="shang_tit-play">
                  <p>对你有帮助，那就打赏一下吧</p>
                </div>
				
				<div class="shang_payimg">    
                    <img src="/assets/img/wechatimg.jpg" alt="扫码支持" title="扫一扫"/>
                </div>
				
				 <div class="pay_item" data-id="weipay">
                    <span class="pay_logo"><img src="/assets/img/wechat.jpg" alt="微信" /></span>
                  </div>
				
                <div class="shang_payimg">
                    <img src="/assets/img/alipayimg.jpg" alt="扫码支持" title="扫一扫" />
                </div>
				
				 <div class="pay_item checked" data-id="alipay">
                    <span class="pay_logo"><img src="/assets/img/alipay.jpg" alt="支付宝" /></span>
                  </div>
				
                <div class="pay_explain">扫码打赏,金额随意</div>
               
              </div>
            </div>
            <script type="text/javascript">
            function dashangToggle(){
              $(".hide_box-play").fadeToggle();
              $(".shang_box-play").fadeToggle();
            }
            </script>

            <div style="text-align:center;margin:50px 0; font:normal 14px/24px 'MicroSoft YaHei';"></div>

            <style type="text/css">
              .content-play{width:100%;margin-top: 20px;margin-bottom: 10px;height:40px;text-align:center;}
              .hide_box-play{z-index:999;filter:alpha(opacity=50);background:#666;opacity: 0.5;-moz-opacity: 0.5;left:0;top:0;height:99%;width:100%;position:fixed;display:none;}
              .shang_box-play{width:100%;height:540px;padding:10px;background-color:#fff;border-radius:10px;position:fixed;z-index:1000;left:0%;top:50%;margin-left:0px;margin-top:-280px;border:1px dotted #dedede;display:none;}
              .shang_box-play img{border:none;border-width:0;}
              .dashang{width:100px;margin:5px auto;height:25px;line-height:25px;padding:10px;background-color:#E74851;color:#fff;text-align:center;text-decoration:none;border-radius:10px;font-weight:bold;font-size:16px;transition: all 0.3s;}
              .dashang:hover{opacity:0.8;padding:15px;font-size:18px;}
              .shang_close-play{float:right;display:inline-block;
                margin-right: 10px;margin-top: 20px;
              }
              .shang_logo{display:block;text-align:center;margin:20px auto;}
              .shang_tit-play{width: 100%;height: 75px;text-align: center;line-height: 66px;color: #a3a3a3;font-size: 16px;background: url('/images/payimg/cy-reward-title-bg.jpg');font-family: 'Microsoft YaHei';margin-top: 7px;margin-right:2px;}
              .shang_tit-play p{color:#a3a3a3;text-align:center;font-size:16px;}
              .shang_payimg{padding:10px;/*border:6px solid #EA5F00;**/margin:0 auto;border-radius:3px;height:140px;display:inline-block;}
              .shang_payimg img{display:inline-block;margin-right:10px;float:left;text-align:center;width:140px;height:140px; }
              .pay_explain{text-align:center;margin:10px auto;font-size:12px;color:#545454;}
              .shang_payselect{text-align:center;margin:0 auto;margin-top:40px;cursor:pointer;height:60px;width:500px;margin-left:110px;}
              .shang_payselect .pay_item{display:inline-block;margin-right:140px;float:left;}
              .shang_info-play{clear:both;}
              .shang_info-play p,.shang_info-play a{color:#C3C3C3;text-align:center;font-size:12px;text-decoration:none;line-height:2em;}
            </style>

       <ul class="pager">
	    
        <li class="previous">
            <a href="/mpvue2/" data-toggle="tooltip" data-placement="top" title="mpvue (二)">上一篇：  <span>mpvue (二)</span>
            </a>
        </li>
		
		<br><br>
		
        
        
        <li class="next">
            <a href="/wepy3/" data-toggle="tooltip" data-placement="top" title="wepy (三)">下一篇：  <span>wepy (三)</span>
            </a>
        </li>
        
    </ul>
</section>

        </div>
		
		
        <section class="author-box">
  <img src="/assets/img/leach-face.jpg" alt="nldrs" class="author-img">
  <div class="author-desc">
    <h2>nldrs</h2>
    <p>码农，嘿说你呢！！？</p>
    <ul>
      
        <li class="email"><a href="mailto:lpfwch777@gmail.com"><i class="fa fa-envelope-o"></i></a></li>
      
      
        <li class="phone"><a href="tel:0"><i class="fa fa-phone"></i></a></li>
      
      <!--
        <li class="website"><a href="https://artemsheludko.github.io" target="_blank"><i class="fa fa-globe" aria-hidden="true"></i></a></li>
      
      
        <li class="twitter"><a href="https://twitter.com/artemsheludko_" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
      -->
    </ul>
  </div>
</section>

        <div class="recent-box">
  <h2 class="recent-title">Recent post</h2>
  <div class="recent-list">
    
      
        <a href="/mpvue3/" class="recent-item" style="background: url(/assets/img/lpf-20.jpg) center no-repeat; background-size: cover;"><span>mpvue (三)</span></a>
      
    
      
        <a href="/mpvue2/" class="recent-item" style="background: url(/assets/img/lpf-19.jpg) center no-repeat; background-size: cover;"><span>mpvue (二)</span></a>
      
    
      
        <a href="/mpvue1/" class="recent-item" style="background: url(/assets/img/lpf-18.jpg) center no-repeat; background-size: cover;"><span>mpvue (一)</span></a>
      
    
      
        <a href="/wepy3/" class="recent-item" style="background: url(/assets/img/lpf-17.jpg) center no-repeat; background-size: cover;"><span>wepy (三)</span></a>
      
    
  </div>
</div> <!-- End Recent-Box -->

        <div class="newsletter" id="mc_embed_signup" style="display:none">
  <h2 class="newsletter-title">Newsletter</h2>
  <div class="form-container">
    <p>Subscribe here to get our latest updates</p>
    <form action="//" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
      <label class="screen-reader-text" for="mce-EMAIL">Email Address</label>
      <div class="newsletter-box" id="mc_embed_signup_scroll">
        <input type="email" name="EMAIL" placeholder="Email address" class="email-input" id="mce-EMAIL" required>
        <input type="submit" value="Subscribe" name="subscribe" class="subscribe-btn" id="mc-embedded-subscribe">
      </div>
    </form>
  </div>
</div> <!-- End Newsletter -->

        <section class="comment-area">
  <div class="comment-wrapper">
   
	  <div id="disqus_thread" class="article-comments"></div>
	    <script>
			var idcomments_acct = '8b1583de29c0b1f23510ee43fce7d4e7';
			var idcomments_post_id;
			var idcomments_post_url;
		</script>
		<span id="IDCommentsPostTitle" style="display:none"></span>
		<script type='text/javascript' src='https://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>
	
  </div>
</section>
      </div>
    </div> <!-- End Wrapper -->
  </article>
  <div class="search-box">
  <div class="wrapper">
    <div class="search-grid">
      <form class="search-form">
        <div id="search-container">
          <input type="text" id="search-input" class="search" placeholder="Search">
        </div>
      </form>
      <ul id="results-container" class="results-search"  style="height:400px;overflow-y:scroll;overflow-y:auto;"></ul>
      <div class="icon-close-container">
        <span class="search-icon-close"><i class="fa fa-times" aria-hidden="true"></i></span>
      </div>
    </div>
  </div>
</div>

  <footer class="main-footer">
	<div class="footer-social">
		<div class="footer-container clearfix">
			<div class="social-list">
				<a class="social github" target="blank" href="https://github.com/nldrs">GitHub</a>
				<a class="social github" target="blank" href="https://www.jianshu.com/u/042fe873dc7c">简书</a>
				<a class="social github" target="blank" href="https://juejin.im/user/5a20a378f265da4311200031/collections">掘金</a>
				<a class="social github" target="blank" href="http://blog.csdn.net/">Csdn</a>
			</div>
		</div>
	</div>

	<div class="copyright">
		<p>2018 &copy; nldrs</p>
		
			
	<div style="font-size:12px;color:#B3B3B3;padding-right:30px;float:right"> 
		<iframe
                style="margin-left: 2px; margin-bottom:-5px;"
                frameborder="0" scrolling="0" width="91px" height="20px"
                src="https://ghbtns.com/github-btn.html?user=leach-chen&repo=leach-chen.github.io&type=star&count=true" >
            </iframe>
		<span id="busuanzi_container_site_pv">本站总访问量：<span id="busuanzi_value_site_pv"></span>次</span>
	</div>
	</div>

</footer> <!-- End Footer -->

</div>

  
  
<div class="top" title="Top"><i class="fa fa-chevron-up" aria-hidden="true"></i></div> <!-- End Top Scroll -->
  <!-- JS -->
<script src="/assets/js/jquery-3.2.1.min.js"></script>
<script src="/assets/js/jekyll-search.js"></script>
<script>
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/search.json',
    searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>',
    noResultsText: 'No results found',
    fuzzy: false,
    exclude: ['Welcome']
  });
</script>
<script src="/assets/js/main.js"></script>

  <!--<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

</body>
</html>
