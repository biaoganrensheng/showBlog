<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>学习微信开发框架(五) - Blog - 努力的人生</title>
	<meta name="description" content="学习微信开发框架">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-touch-icon-114x114.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#311e3e">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#311e3e">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#311e3e">
	
	
	
	
	<!-- Google Fonts 1
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">-->
	
	
	
	
	
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="/assets/css/main.css">

	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>  
	
	
	<!--百度统计-->
	<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "https://hm.baidu.com/hm.js?660ee541ef48f4a94f8a59dd0f9e64ae";
		  var s = document.getElementsByTagName("script")[0]; 
		  s.parentNode.insertBefore(hm, s);
		})();
	</script>
	
	
	
	
	
	
	
	<!--谷歌统计-->
	<!-- Global site tag (gtag.js) - Google Analytics 
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-113644888-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-113644888-1');
	</script>-->

</head>

<body>
  <div class="flex-container">
  <header class="main-header">
  <div class="wrapper">
    <div class="header-flex">
      <div class="menu-icon-container">
        <span class="menu-icon"><i class="fa fa-bars" aria-hidden="true"></i></span>
      </div>
      <nav class="main-nav">
        <span class="menu-icon-close"><i class="fa fa-times" aria-hidden="true"></i></span>
        <!--<ul style="height:800px;overflow-y:scroll;overflow-y:auto;"> -->
        <ul>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/"  data-hover="所有">所有(67)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/markdown"  data-hover="Markdown">Markdown(4)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/essays"  data-hover="随笔">随笔(3)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/jekyll"  data-hover="Jekyll">Jekyll(1)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/vue"  data-hover="Vue">Vue(3)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/react"  data-hover="React">React(2)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/anglur"  data-hover="Anglur">Anglur(1)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/youman"  data-hover="构建工具">构建工具(1)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/nginx2"  data-hover="Nginx2">Nginx2(1)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/python"  data-hover="Python">Python(2)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/abouttest"  data-hover="测试相关">测试相关(6)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/aboutweb"  data-hover="前端相关">前端相关(15)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/wechat"  data-hover="Wechat">Wechat(21)</a></li>
		 
			 
			 

			 

			 

			 

			 

       

       

       

       

       

       

       

       

       
       
			 <li><a  href="/blog/other"  data-hover="其它">其它(7)</a></li>
		 
          <!--<li style="margin-bottom:200px;"><a href="/about">About(7)</a></li>-->
        </ul>
      </nav>
      <p class="logo"><a href="/">nldrs</a></p>


		<div class="navbar-container">

		<div class="search-icon"><a><i class="fa fa-search" aria-hidden="true"></i></a></div>

			<div class="navbar-menu">
			   
				<a href="/"  data-hover="Home">Home</a>  <!--title="访问 Home"-->
				<!--<a href="/">Home</a>-->
					
				<a href="/about"  data-hover="About">About</a>  <!--title="访问 About"-->
				<!--<a href="/about">About</a>-->
					
			</div>


			<div class="navbar-mobile-menu" onclick="">
				<span class="icon-menu cross"><span class="middle"></span></span>
				<ul>
				   
					 <li><a href="/"data-hover="Home">Home</a></li>  <!--title="访问 Home"-->
					 <!--<li><a href="/">Home</a></li>-->
				   
					 <li><a href="/about"data-hover="About">About</a></li>  <!--title="访问 About"-->
					 <!--<li><a href="/about">About</a></li>-->
				   
				</ul>
			</div>



		</div>

    <!--  <div class="search-icon-container">
	    <a href="/" style="text-decoration: none; color: inherit;margin-right:20px;">Home</a>
		<a href="/about" style=" text-decoration: none; color: inherit;margin-right:20px;">About</a>
        <span class="search-icon"><a><i class="fa fa-search" aria-hidden="true"></i></a></span>
      </div> -->


    </div>
  </div>
</header> <!-- End Header -->

  <article class="article-page">
    <div class="page-image">
      <div class="cover-image" style="background: url(/assets/img/lpf-5.jpg) center no-repeat; background-size: cover;"></div>
    </div>
    <div class="wrapper">
      <div class="page-content">
        <div class="header-page">
          <h1 class="page-title">学习微信开发框架(五)</h1>
          <div class="page-date"><time datetime="2018-08-28 17:30:00 +0800">2018, Aug 28</time>
		  <span id="busuanzi_container_page_pv"> | 访问量：<span id="busuanzi_value_page_pv"></span> 次</span>
		  </div>
        </div>
        <h1 id="学习微信开发框架视图层">学习微信开发框架(视图层)</h1>

<h1 id="视图层-view">视图层 View</h1>
<p>框架的视图层由 WXML 与 WXSS 编写，由组件来进行展示。</p>

<p>将逻辑层的数据反应成视图，同时将视图层的事件发送给逻辑层。</p>

<p>WXML(WeiXin Markup language) 用于描述页面的结构。</p>

<p>WXS(WeiXin Script) 是小程序的一套脚本语言，结合 WXML，可以构建出页面的结构。</p>

<p>WXSS(WeiXin Style Sheet) 用于描述页面的样式。</p>

<p>组件(Component)是视图的基本组成单元。</p>

<hr />

<h1 id="数据绑定">数据绑定</h1>
<p>WXML 中的动态数据均来自对应 Page 的 data。</p>

<p>简单绑定
数据绑定使用 Mustache 语法（双大括号）将变量包起来，可以作用于：</p>

<p>组件属性(需要在双引号之内)</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">view</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"item-"</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="nx">Page</span><span class="p">({</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="mi">0</span>
  <span class="p">}</span>
<span class="p">})</span>

</code></pre></div></div>

<p>控制属性(需要在双引号之内)</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">view</span> <span class="nx">wx</span><span class="p">:</span><span class="k">if</span><span class="o">=</span><span class="s2">""</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="nx">Page</span><span class="p">({</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">condition</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div>

<p>关键字(需要在双引号之内)</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kc">true</span><span class="err">：</span><span class="kt">boolean</span> <span class="err">类型的</span> <span class="kc">true</span><span class="err">，代表真值。</span>

<span class="kc">false</span><span class="err">：</span> <span class="kt">boolean</span> <span class="err">类型的</span> <span class="kc">false</span><span class="err">，代表假值。</span>

<span class="o">&lt;</span><span class="n">checkbox</span> <span class="n">checked</span><span class="o">=</span><span class="s">"false"</span><span class="o">&gt;</span> <span class="o">&lt;/</span><span class="n">checkbox</span><span class="o">&gt;</span>
<span class="c1">//特别注意：不要直接写 checked="false"，其计算结果是一个字符串，转成 boolean 类型后代表真值。</span>

</code></pre></div></div>
<p>运算
可以在  内进行简单的运算，支持的有如下几种方式：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">view</span> <span class="nx">hidden</span><span class="o">=</span><span class="s2">""</span><span class="o">&gt;</span> <span class="nx">Hidden</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">view</span><span class="o">&gt;</span>  <span class="o">+</span>  <span class="o">+</span> <span class="nx">d</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="nx">Page</span><span class="p">({</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">b</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="na">c</span><span class="p">:</span> <span class="mi">3</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="c1">//view中的内容为 3 + 3 + d。</span>
<span class="c1">//逻辑判断</span>
<span class="o">&lt;</span><span class="nx">view</span> <span class="na">wx</span><span class="p">:</span><span class="k">if</span><span class="o">=</span><span class="s2">""</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="c1">//字符串运算</span>
<span class="o">&lt;</span><span class="nx">view</span><span class="o">&gt;</span><span class="nx">hello</span><span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="c1">//也可以用扩展运算符 ... 来将一个对象展开</span>

<span class="o">&lt;</span><span class="nx">template</span> <span class="nx">is</span><span class="o">=</span><span class="s2">"objectCombine"</span> <span class="nx">data</span><span class="o">=</span><span class="s2">""</span><span class="o">&gt;&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span><span class="nx">Page</span><span class="p">({</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">obj1</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="na">b</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">},</span>
    <span class="na">obj2</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">c</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
      <span class="na">d</span><span class="p">:</span> <span class="mi">4</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="c1">//最终组合成的对象是 {a: 1, b: 2, c: 3, d: 4, e: 5}。</span>

<span class="c1">//如果对象的 key 和 value 相同，也可以间接地表达。</span>

<span class="o">&lt;</span><span class="nx">template</span> <span class="nx">is</span><span class="o">=</span><span class="s2">"objectCombine"</span> <span class="nx">data</span><span class="o">=</span><span class="s2">""</span><span class="o">&gt;&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span><span class="nx">Page</span><span class="p">({</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">foo</span><span class="p">:</span> <span class="s1">'my-foo'</span><span class="p">,</span>
    <span class="na">bar</span><span class="p">:</span> <span class="s1">'my-bar'</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="c1">//最终组合成的对象是 {foo: 'my-foo', bar:'my-bar'}。</span>

<span class="c1">//注意：上述方式可以随意组合，但是如有存在变量名相同的情况，后边的会覆盖前面，如：</span>

<span class="o">&lt;</span><span class="nx">template</span> <span class="nx">is</span><span class="o">=</span><span class="s2">"objectCombine"</span> <span class="nx">data</span><span class="o">=</span><span class="s2">""</span><span class="o">&gt;&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span><span class="nx">Page</span><span class="p">({</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">obj1</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="na">b</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">},</span>
    <span class="na">obj2</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">b</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
      <span class="na">c</span><span class="p">:</span> <span class="mi">4</span>
    <span class="p">},</span>
    <span class="na">a</span><span class="p">:</span> <span class="mi">5</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="c1">//最终组合成的对象是 {a: 5, b: 3, c: 6}。</span>
<span class="c1">//注意： 花括号和引号之间如果有空格，将最终被解析成为字符串</span>

<span class="o">&lt;</span><span class="nx">view</span> <span class="na">wx</span><span class="p">:</span><span class="k">for</span><span class="o">=</span><span class="s2">" "</span><span class="o">&gt;</span>
  
<span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="c1">//等同于</span>

<span class="o">&lt;</span><span class="nx">view</span> <span class="na">wx</span><span class="p">:</span><span class="k">for</span><span class="o">=</span><span class="s2">""</span><span class="o">&gt;</span>
  
<span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span></code></pre></div></div>
<h1 id="列表渲染">列表渲染</h1>
<hr />

<p>在组件上使用 wx:for 控制属性绑定一个数组，即可使用数组中各项的数据重复渲染该组件。</p>

<p>默认数组的当前项的下标变量名默认为 index，数组当前项的变量名默认为 item</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">view</span> <span class="nx">wx</span><span class="p">:</span><span class="k">for</span><span class="o">=</span><span class="s2">""</span><span class="o">&gt;</span>
  <span class="p">:</span> 
<span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="nx">Page</span><span class="p">({</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">array</span><span class="p">:</span> <span class="p">[{</span>
      <span class="na">message</span><span class="p">:</span> <span class="s1">'foo'</span><span class="p">,</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="na">message</span><span class="p">:</span> <span class="s1">'bar'</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div>
<blockquote>
  <p>使用 wx:for-item 可以指定数组当前元素的变量名，</p>
</blockquote>

<p>使用 wx:for-index 可以指定数组当前下标的变量名：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">view</span> <span class="nx">wx</span><span class="p">:</span><span class="k">for</span><span class="o">=</span><span class="s2">""</span> <span class="nx">wx</span><span class="p">:</span><span class="k">for</span><span class="o">-</span><span class="nx">index</span><span class="o">=</span><span class="s2">"idx"</span> <span class="nx">wx</span><span class="p">:</span><span class="k">for</span><span class="o">-</span><span class="nx">item</span><span class="o">=</span><span class="s2">"itemName"</span><span class="o">&gt;</span>
  <span class="p">:</span> 
<span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span></code></pre></div></div>
<p><code class="highlighter-rouge">wx:for 也可以嵌套，下边是一个九九乘法表</code></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">view</span> <span class="nx">wx</span><span class="p">:</span><span class="k">for</span><span class="o">=</span><span class="s2">""</span> <span class="nx">wx</span><span class="p">:</span><span class="k">for</span><span class="o">-</span><span class="nx">item</span><span class="o">=</span><span class="s2">"i"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">view</span> <span class="nx">wx</span><span class="p">:</span><span class="k">for</span><span class="o">=</span><span class="s2">""</span> <span class="nx">wx</span><span class="p">:</span><span class="k">for</span><span class="o">-</span><span class="nx">item</span><span class="o">=</span><span class="s2">"j"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">view</span> <span class="nx">wx</span><span class="p">:</span><span class="k">if</span><span class="o">=</span><span class="s2">""</span><span class="o">&gt;</span>
       <span class="o">*</span>  <span class="o">=</span> 
    <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span></code></pre></div></div>
<h1 id="block-wxfor">block wx:for</h1>
<blockquote>
  <p>类似 block wx:if，也可以将 wx:for 用在<block></block>标签上，以渲染一个包含多节点的结构块。例如：</p>
</blockquote>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">block</span> <span class="nx">wx</span><span class="p">:</span><span class="k">for</span><span class="o">=</span><span class="s2">""</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">view</span><span class="o">&gt;</span> <span class="p">:</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="nx">view</span><span class="o">&gt;</span>  <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/block</span><span class="err">&gt;
</span></code></pre></div></div>
<h2 id="wxkey">wx:key</h2>
<p>如果列表中项目的位置会动态改变或者有新的项目添加到列表中，并且希望列表中的项目保持自己的特征和状态（如 <input /> 中的输入内容，<switch></switch> 的选中状态），需要使用 wx:key 来指定列表中项目的唯一的标识符。</p>

<p><code class="highlighter-rouge">wx:key 的值以两种形式提供</code></p>

<blockquote>
  <p>字符串，代表在 for 循环的 array 中 item 的某个 property，该 property 的值需要是列表中唯一的字符串或数字，且不能动态改变。
保留关键字 *this 代表在 for 循环中的 item 本身，这种表示需要 item 本身是一个唯一的字符串或者数字，如：
当数据改变触发渲染层重新渲染的时候，会校正带有 key 的组件，框架会确保他们被重新排序，而不是重新创建，以确保使组件保持自身的状态，并且提高列表渲染时的效率。</p>
</blockquote>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="k">switch</span> <span class="nx">wx</span><span class="p">:</span><span class="k">for</span><span class="o">=</span><span class="s2">""</span> <span class="nx">wx</span><span class="p">:</span><span class="nx">key</span><span class="o">=</span><span class="s2">"unique"</span> <span class="nx">style</span><span class="o">=</span><span class="s2">"display: block;"</span><span class="o">&gt;</span>  <span class="o">&lt;</span><span class="sr">/switch</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">button</span> <span class="nx">bindtap</span><span class="o">=</span><span class="s2">"switch"</span><span class="o">&gt;</span> <span class="nx">Switch</span> <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">button</span> <span class="nx">bindtap</span><span class="o">=</span><span class="s2">"addToFront"</span><span class="o">&gt;</span> <span class="nx">Add</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">front</span> <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="k">switch</span> <span class="nx">wx</span><span class="p">:</span><span class="k">for</span><span class="o">=</span><span class="s2">""</span> <span class="nx">wx</span><span class="p">:</span><span class="nx">key</span><span class="o">=</span><span class="s2">"*this"</span> <span class="nx">style</span><span class="o">=</span><span class="s2">"display: block;"</span><span class="o">&gt;</span>  <span class="o">&lt;</span><span class="sr">/switch</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">button</span> <span class="nx">bindtap</span><span class="o">=</span><span class="s2">"addNumberToFront"</span><span class="o">&gt;</span> <span class="nx">Add</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">front</span> <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span><span class="nx">Page</span><span class="p">({</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">objectArray</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">unique</span><span class="p">:</span> <span class="s1">'unique_5'</span><span class="p">},</span>
      <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">unique</span><span class="p">:</span> <span class="s1">'unique_4'</span><span class="p">},</span>
      <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">unique</span><span class="p">:</span> <span class="s1">'unique_3'</span><span class="p">},</span>
      <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">unique</span><span class="p">:</span> <span class="s1">'unique_2'</span><span class="p">},</span>
      <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">unique</span><span class="p">:</span> <span class="s1">'unique_1'</span><span class="p">},</span>
      <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">unique</span><span class="p">:</span> <span class="s1">'unique_0'</span><span class="p">},</span>
    <span class="p">],</span>
    <span class="na">numberArray</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="na">switch</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">length</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">objectArray</span><span class="p">.</span><span class="nx">length</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">length</span><span class="p">)</span>
      <span class="kd">const</span> <span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">length</span><span class="p">)</span>
      <span class="kd">const</span> <span class="nx">temp</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">objectArray</span><span class="p">[</span><span class="nx">x</span><span class="p">]</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">objectArray</span><span class="p">[</span><span class="nx">x</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">objectArray</span><span class="p">[</span><span class="nx">y</span><span class="p">]</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">objectArray</span><span class="p">[</span><span class="nx">y</span><span class="p">]</span> <span class="o">=</span> <span class="nx">temp</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
      <span class="na">objectArray</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">objectArray</span>
    <span class="p">})</span>
  <span class="p">},</span>
  <span class="na">addToFront</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">length</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">objectArray</span><span class="p">.</span><span class="nx">length</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">objectArray</span> <span class="o">=</span> <span class="p">[{</span><span class="na">id</span><span class="p">:</span> <span class="nx">length</span><span class="p">,</span> <span class="na">unique</span><span class="p">:</span> <span class="s1">'unique_'</span> <span class="o">+</span> <span class="nx">length</span><span class="p">}].</span><span class="nx">concat</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">objectArray</span><span class="p">)</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
      <span class="na">objectArray</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">objectArray</span>
    <span class="p">})</span>
  <span class="p">},</span>
  <span class="na">addNumberToFront</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">numberArray</span> <span class="o">=</span> <span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">numberArray</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">numberArray</span><span class="p">)</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
      <span class="na">numberArray</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">numberArray</span>
    <span class="p">})</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="c1">//注意：</span>

<span class="c1">//当 wx:for 的值为字符串时，会将字符串解析成字符串数组</span>

<span class="o">&lt;</span><span class="nx">view</span> <span class="na">wx</span><span class="p">:</span><span class="k">for</span><span class="o">=</span><span class="s2">"array"</span><span class="o">&gt;</span>
  
<span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="c1">//等同于</span>

<span class="o">&lt;</span><span class="nx">view</span> <span class="na">wx</span><span class="p">:</span><span class="k">for</span><span class="o">=</span><span class="s2">""</span><span class="o">&gt;</span>
  
<span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="c1">//注意： 花括号和引号之间如果有空格，将最终被解析成为字符串</span>

<span class="o">&lt;</span><span class="nx">view</span> <span class="na">wx</span><span class="p">:</span><span class="k">for</span><span class="o">=</span><span class="s2">" "</span><span class="o">&gt;</span>
  
<span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="c1">//等同于</span>

<span class="o">&lt;</span><span class="nx">view</span> <span class="na">wx</span><span class="p">:</span><span class="k">for</span><span class="o">=</span><span class="s2">""</span> <span class="o">&gt;</span>
  
<span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span></code></pre></div></div>
<h1 id="条件渲染">条件渲染</h1>
<hr />

<p>wx:if
在框架中，使用 wx:if=”” 来判断是否需要渲染该代码块：</p>

<p><code class="highlighter-rouge">&lt;view wx:if=""&gt; True &lt;/view&gt;</code></p>

<p>也可以用 wx:elif 和 wx:else 来添加一个 else 块：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="o">&lt;</span><span class="nx">view</span> <span class="nx">wx</span><span class="p">:</span><span class="k">if</span><span class="o">=</span><span class="s2">""</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">view</span> <span class="nx">wx</span><span class="p">:</span><span class="nx">elif</span><span class="o">=</span><span class="s2">""</span><span class="o">&gt;</span> <span class="mi">2</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">view</span> <span class="nx">wx</span><span class="p">:</span><span class="k">else</span><span class="o">&gt;</span> <span class="mi">3</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span>
</code></pre></div></div>
<h3 id="block-wxif">block wx:if</h3>
<p>因为 wx:if 是一个控制属性，需要将它添加到一个标签上。如果要一次性判断多个组件标签，可以使用一个 <block></block> 标签将多个组件包装起来，并在上边使用 wx:if 控制属性。</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">block</span> <span class="nx">wx</span><span class="p">:</span><span class="k">if</span><span class="o">=</span><span class="s2">"true"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">view</span><span class="o">&gt;</span> <span class="nx">view1</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="nx">view</span><span class="o">&gt;</span> <span class="nx">view2</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/block</span><span class="err">&gt;
</span></code></pre></div></div>
<p>注意： <block></block> 并不是一个组件，它仅仅是一个包装元素，不会在页面中做任何渲染，只接受控制属性。</p>

<p><code class="highlighter-rouge">wx:if vs hidden</code></p>
<blockquote>
  <p>因为 wx:if 之中的模板也可能包含数据绑定，所以当 wx:if 的条件值切换时，框架有一个局部渲染的过程，因为它会确保条件块在切换时销毁或重新渲染。</p>
</blockquote>

<blockquote>
  <p>同时 wx:if 也是惰性的，如果在初始渲染条件为 false，框架什么也不做，在条件第一次变成真的时候才开始局部渲染。</p>
</blockquote>

<blockquote>
  <p>相比之下，hidden 就简单的多，组件始终会被渲染，只是简单的控制显示与隐藏。</p>
</blockquote>

<blockquote>
  <p>一般来说，wx:if 有更高的切换消耗而 hidden 有更高的初始渲染消耗。因此，如果需要频繁切换的情景下，用 hidden 更好，如果在运行时条件不大可能改变则 wx:if 较好。</p>
</blockquote>

<h1 id="模板">模板</h1>
<p>WXML提供模板（template），可以在模板中定义代码片段，然后在不同的地方调用。</p>

<hr />

<p>定义模板
使用 name 属性，作为模板的名字。然后在<template></template>内定义代码片段，如：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--</span>
  <span class="nx">index</span><span class="p">:</span> <span class="kr">int</span>
  <span class="nx">msg</span><span class="p">:</span> <span class="nx">string</span>
  <span class="nx">time</span><span class="p">:</span> <span class="nx">string</span>
<span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">template</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"msgItem"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">view</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">text</span><span class="o">&gt;</span> <span class="p">:</span>  <span class="o">&lt;</span><span class="sr">/text</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">text</span><span class="o">&gt;</span> <span class="nx">Time</span><span class="p">:</span>  <span class="o">&lt;</span><span class="sr">/text</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span></code></pre></div></div>

<p>使用模板
使用 is 属性，声明需要的使用的模板，然后将模板所需要的 data 传入，如：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">template</span> <span class="nx">is</span><span class="o">=</span><span class="s2">"msgItem"</span> <span class="nx">data</span><span class="o">=</span><span class="s2">""</span><span class="o">/&gt;</span>
<span class="nx">Page</span><span class="p">({</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">item</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">index</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="na">msg</span><span class="p">:</span> <span class="s1">'this is a template'</span><span class="p">,</span>
      <span class="na">time</span><span class="p">:</span> <span class="s1">'2016-09-15'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div>

<p>is 属性可以使用 Mustache 语法，来动态决定具体需要渲染哪个模板：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">template</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"odd"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">view</span><span class="o">&gt;</span> <span class="nx">odd</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">template</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"even"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">view</span><span class="o">&gt;</span> <span class="nx">even</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">block</span> <span class="nx">wx</span><span class="p">:</span><span class="k">for</span><span class="o">=</span><span class="s2">""</span><span class="o">&gt;</span>
	<span class="o">&lt;</span><span class="nx">template</span> <span class="nx">is</span><span class="o">=</span><span class="s2">""</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="sr">/block</span><span class="err">&gt;
</span></code></pre></div></div>

<p>模板的作用域
模板拥有自己的作用域，只能使用 data 传入的数据以及模版定义文件中定义的 <wxs></wxs> 模块。</p>

<h1 id="事件">事件</h1>
<hr />

<blockquote>
  <p>什么是事件
  事件是视图层到逻辑层的通讯方式。
  事件可以将用户的行为反馈到逻辑层进行处理。
  事件可以绑定在组件上，当达到触发事件，就会执行逻辑层中对应的事件处理函数。
   事件对象可以携带额外信息，如 id, dataset, touches。</p>
</blockquote>

<p>事件的使用方式
在组件中绑定一个事件处理函数。
如bindtap，当用户点击该组件的时候会在该页面对应的Page中找到相应的事件处理函数。</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">view</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"tapTest"</span> <span class="nx">data</span><span class="o">-</span><span class="nx">hi</span><span class="o">=</span><span class="s2">"WeChat"</span> <span class="nx">bindtap</span><span class="o">=</span><span class="s2">"tapName"</span><span class="o">&gt;</span> <span class="nx">Click</span> <span class="nx">me</span><span class="o">!</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="c1">//在相应的Page定义中写上相应的事件处理函数，参数是event。</span>
<span class="nx">Page</span><span class="p">({</span>
  <span class="na">tapName</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="c1">//可以看到log出来的信息大致如下：</span>

<span class="p">{</span>
  <span class="s2">"type"</span><span class="p">:</span><span class="s2">"tap"</span><span class="p">,</span>
  <span class="s2">"timeStamp"</span><span class="p">:</span><span class="mi">895</span><span class="p">,</span>
  <span class="s2">"target"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"tapTest"</span><span class="p">,</span>
    <span class="s2">"dataset"</span><span class="p">:</span>  <span class="p">{</span>
      <span class="s2">"hi"</span><span class="p">:</span><span class="s2">"WeChat"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">"currentTarget"</span><span class="p">:</span>  <span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"tapTest"</span><span class="p">,</span>
    <span class="s2">"dataset"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"hi"</span><span class="p">:</span><span class="s2">"WeChat"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">"detail"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"x"</span><span class="p">:</span><span class="mi">53</span><span class="p">,</span>
    <span class="s2">"y"</span><span class="p">:</span><span class="mi">14</span>
  <span class="p">},</span>
  <span class="s2">"touches"</span><span class="p">:[{</span>
    <span class="s2">"identifier"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
    <span class="s2">"pageX"</span><span class="p">:</span><span class="mi">53</span><span class="p">,</span>
    <span class="s2">"pageY"</span><span class="p">:</span><span class="mi">14</span><span class="p">,</span>
    <span class="s2">"clientX"</span><span class="p">:</span><span class="mi">53</span><span class="p">,</span>
    <span class="s2">"clientY"</span><span class="p">:</span><span class="mi">14</span>
  <span class="p">}],</span>
  <span class="s2">"changedTouches"</span><span class="p">:[{</span>
    <span class="s2">"identifier"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
    <span class="s2">"pageX"</span><span class="p">:</span><span class="mi">53</span><span class="p">,</span>
    <span class="s2">"pageY"</span><span class="p">:</span><span class="mi">14</span><span class="p">,</span>
    <span class="s2">"clientX"</span><span class="p">:</span><span class="mi">53</span><span class="p">,</span>
    <span class="s2">"clientY"</span><span class="p">:</span><span class="mi">14</span>
  <span class="p">}]</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="事件详解">事件详解</h3>
<p>事件分类
<code class="highlighter-rouge">事件分为冒泡事件和非冒泡事件：</code></p>

<p>冒泡事件：当一个组件上的事件被触发后，该事件会向父节点传递。
非冒泡事件：当一个组件上的事件被触发后，该事件不会向父节点传递。</p>

<p><img src="http://ww1.sinaimg.cn/large/006uNFWmgy1fuppoune5dj30td0ld75d.jpg" alt="" /></p>

<p>注：除上表之外的其他组件自定义事件如无特殊声明都是非冒泡事件，如&lt;form/&gt;的submit事件，<input />的input事件，<scroll-view></scroll-view>的scroll事件，(详见各个组件)</p>

<h2 id="事件绑定和冒泡">事件绑定和冒泡</h2>
<p>事件绑定的写法同组件的属性，以 key、value 的形式。</p>

<p>key 以bind或catch开头，然后跟上事件的类型，如bindtap、catchtouchstart。自基础库版本 1.5.0 起，在非原生组件中，bind和catch后可以紧跟一个冒号，其含义不变，如bind:tap、catch:touchstart。
value 是一个字符串，需要在对应的 Page 中定义同名的函数。不然当触发事件的时候会报错。
bind事件绑定不会阻止冒泡事件向上冒泡，catch事件绑定可以阻止冒泡事件向上冒泡。</p>

<p>如在下边这个例子中，点击 inner view 会先后调用handleTap3和handleTap2(因为tap事件会冒泡到 middle view，而 middle view 阻止了 tap 事件冒泡，不再向父节点传递)，点击 middle view 会触发handleTap2，点击 outer view 会触发handleTap1。</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">view</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"outer"</span> <span class="nx">bindtap</span><span class="o">=</span><span class="s2">"handleTap1"</span><span class="o">&gt;</span>
  <span class="nx">outer</span> <span class="nx">view</span>
  <span class="o">&lt;</span><span class="nx">view</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"middle"</span> <span class="nx">catchtap</span><span class="o">=</span><span class="s2">"handleTap2"</span><span class="o">&gt;</span>
    <span class="nx">middle</span> <span class="nx">view</span>
    <span class="o">&lt;</span><span class="nx">view</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"inner"</span> <span class="nx">bindtap</span><span class="o">=</span><span class="s2">"handleTap3"</span><span class="o">&gt;</span>
      <span class="nx">inner</span> <span class="nx">view</span>
    <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span></code></pre></div></div>

<p>事件的捕获阶段
自基础库版本 1.5.0 起，触摸类事件支持捕获阶段。捕获阶段位于冒泡阶段之前，且在捕获阶段中，事件到达节点的顺序与冒泡阶段恰好相反。需要在捕获阶段监听事件时，可以采用capture-bind、capture-catch关键字，后者将中断捕获阶段和取消冒泡阶段。</p>

<p>在下面的代码中，点击 inner view 会先后调用handleTap2、handleTap4、handleTap3、handleTap1</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">view</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"outer"</span> <span class="nx">bind</span><span class="p">:</span><span class="nx">touchstart</span><span class="o">=</span><span class="s2">"handleTap1"</span> <span class="nx">capture</span><span class="o">-</span><span class="nx">bind</span><span class="p">:</span><span class="nx">touchstart</span><span class="o">=</span><span class="s2">"handleTap2"</span><span class="o">&gt;</span>
  <span class="nx">outer</span> <span class="nx">view</span>
  <span class="o">&lt;</span><span class="nx">view</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"inner"</span> <span class="nx">bind</span><span class="p">:</span><span class="nx">touchstart</span><span class="o">=</span><span class="s2">"handleTap3"</span> <span class="nx">capture</span><span class="o">-</span><span class="nx">bind</span><span class="p">:</span><span class="nx">touchstart</span><span class="o">=</span><span class="s2">"handleTap4"</span><span class="o">&gt;</span>
    <span class="nx">inner</span> <span class="nx">view</span>
  <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="c1">//如果将上面代码中的第一个capture-bind改为capture-catch，将只触发handleTap2。</span>

<span class="o">&lt;</span><span class="nx">view</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"outer"</span> <span class="nx">bind</span><span class="p">:</span><span class="nx">touchstart</span><span class="o">=</span><span class="s2">"handleTap1"</span> <span class="nx">capture</span><span class="o">-</span><span class="k">catch</span><span class="p">:</span><span class="nx">touchstart</span><span class="o">=</span><span class="s2">"handleTap2"</span><span class="o">&gt;</span>
  <span class="nx">outer</span> <span class="nx">view</span>
  <span class="o">&lt;</span><span class="nx">view</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"inner"</span> <span class="nx">bind</span><span class="p">:</span><span class="nx">touchstart</span><span class="o">=</span><span class="s2">"handleTap3"</span> <span class="nx">capture</span><span class="o">-</span><span class="nx">bind</span><span class="p">:</span><span class="nx">touchstart</span><span class="o">=</span><span class="s2">"handleTap4"</span><span class="o">&gt;</span>
    <span class="nx">inner</span> <span class="nx">view</span>
  <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span></code></pre></div></div>
<h3 id="事件对象">事件对象</h3>
<p>如无特殊说明，当组件触发事件时，逻辑层绑定该事件的处理函数会收到一个事件对象。</p>

<p>BaseEvent 基础事件对象属性列表：</p>

<p><img src="http://ww1.sinaimg.cn/large/006uNFWmgy1fupqjdmorgj30y009rmxf.jpg" alt="" />
<img src="http://ww1.sinaimg.cn/large/006uNFWmgy1fupqjnk8ezj30xb0evt9n.jpg" alt="" /></p>

<p><code class="highlighter-rouge">特殊事件： &lt;canvas/&gt; 中的触摸事件不可冒泡，所以没有 currentTarget。</code></p>

<p>type
代表事件的类型。</p>

<p>timeStamp
页面打开到触发事件所经过的毫秒数。</p>

<p>target
触发事件的源组件。
<img src="http://ww1.sinaimg.cn/large/006uNFWmgy1fupqlxfpq8j30xn082dfz.jpg" alt="" /></p>

<p>currentTarget
事件绑定的当前组件。
<img src="http://ww1.sinaimg.cn/large/006uNFWmgy1fupqmrb3mmj30yq08ft8u.jpg" alt="" /></p>

<p>说明： target 和 currentTarget 可以参考上例中，点击 inner view 时，handleTap3 收到的事件对象 target 和 currentTarget 都是 inner，而 handleTap2 收到的事件对象 target 就是 inner，currentTarget 就是 middle。</p>
<h3 id="dataset">dataset</h3>
<p>在组件中可以定义数据，这些数据将会通过事件传递给 SERVICE。 书写方式： 以data-开头，多个单词由连字符-链接，不能有大写(大写会自动转成小写)如data-element-type，最终在 event.currentTarget.dataset 中会将连字符转成驼峰elementType。</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">view</span> <span class="nx">data</span><span class="o">-</span><span class="nx">alpha</span><span class="o">-</span><span class="nx">beta</span><span class="o">=</span><span class="s2">"1"</span> <span class="nx">data</span><span class="o">-</span><span class="nx">alphaBeta</span><span class="o">=</span><span class="s2">"2"</span> <span class="nx">bindtap</span><span class="o">=</span><span class="s2">"bindViewTap"</span><span class="o">&gt;</span> <span class="nx">DataSet</span> <span class="nx">Test</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="nx">Page</span><span class="p">({</span>
  <span class="na">bindViewTap</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">alphaBeta</span> <span class="o">===</span> <span class="mi">1</span> <span class="c1">// - 会转为驼峰写法</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">alphabeta</span> <span class="o">===</span> <span class="mi">2</span> <span class="c1">// 大写会转为小写</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div>
<p>touches
touches 是一个数组，每个元素为一个 Touch 对象（canvas 触摸事件中携带的 touches 是 CanvasTouch 数组）。 表示当前停留在屏幕上的触摸点。</p>

<p><img src="http://ww1.sinaimg.cn/large/006uNFWmgy1fupquz8sprj30yc0miq4a.jpg" alt="" /></p>

<h3 id="detail">detail</h3>
<p>自定义事件所携带的数据，如表单组件的提交事件会携带用户的输入，媒体的错误事件会携带错误信息，详见组件定义中各个事件的定义。</p>

<p>点击事件的detail 带有的 x, y 同 pageX, pageY 代表距离文档左上角的距离。</p>

<h1 id="引用">引用</h1>
<p>WXML 提供两种文件引用方式import和include。
<strong>**</strong><strong>**</strong><strong>**</strong><strong>**</strong><strong>**</strong><strong>**</strong><strong>**</strong><strong>**</strong><em>**</em>
import
import可以在该文件中使用目标文件定义的template，如：</p>

<p>在 item.wxml 中定义了一个叫item的template：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--</span> <span class="nx">item</span><span class="p">.</span><span class="nx">wxml</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">template</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"item"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">text</span><span class="o">&gt;&lt;</span><span class="sr">/text</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span></code></pre></div></div>

<p>在 index.wxml 中引用了 item.wxml，就可以使用item模板：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="k">import</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"item.wxml"</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">template</span> <span class="nx">is</span><span class="o">=</span><span class="s2">"item"</span> <span class="nx">data</span><span class="o">=</span><span class="s2">""</span><span class="o">/&gt;</span>
</code></pre></div></div>

<h3 id="import-的作用域">import 的作用域</h3>
<p>import 有作用域的概念，即只会 import 目标文件中定义的 template，而不会 import 目标文件 import 的 template。</p>

<p>如：C import B，B import A，在C中可以使用B定义的template，在B中可以使用A定义的template，但是C不能使用A定义的template。</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--</span> <span class="nx">A</span><span class="p">.</span><span class="nx">wxml</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">template</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"A"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">text</span><span class="o">&gt;</span> <span class="nx">A</span> <span class="nx">template</span> <span class="o">&lt;</span><span class="sr">/text</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span><span class="c">&lt;!--</span> <span class="nx">B</span><span class="p">.</span><span class="nx">wxml</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="k">import</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"a.wxml"</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">template</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"B"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">text</span><span class="o">&gt;</span> <span class="nx">B</span> <span class="nx">template</span> <span class="o">&lt;</span><span class="sr">/text</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span><span class="c">&lt;!--</span> <span class="nx">C</span><span class="p">.</span><span class="nx">wxml</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="k">import</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"b.wxml"</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">template</span> <span class="nx">is</span><span class="o">=</span><span class="s2">"A"</span><span class="o">/&gt;</span>  <span class="c">&lt;!--</span> <span class="nb">Error</span><span class="o">!</span> <span class="nx">Can</span> <span class="nx">not</span> <span class="nx">use</span> <span class="nx">tempalte</span> <span class="nx">when</span> <span class="nx">not</span> <span class="k">import</span> <span class="nx">A</span><span class="p">.</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">template</span> <span class="nx">is</span><span class="o">=</span><span class="s2">"B"</span><span class="o">/&gt;</span>
</code></pre></div></div>

<h3 id="include">include</h3>
<p>include 可以将目标文件除了 <template></template> <wxs></wxs> 外的整个代码引入，相当于是拷贝到 include 位置，如：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--</span> <span class="nx">index</span><span class="p">.</span><span class="nx">wxml</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">include</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"header.wxml"</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">view</span><span class="o">&gt;</span> <span class="nx">body</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">include</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"footer.wxml"</span><span class="o">/&gt;</span>
<span class="c">&lt;!--</span> <span class="nx">header</span><span class="p">.</span><span class="nx">wxml</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">view</span><span class="o">&gt;</span> <span class="nx">header</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span><span class="c">&lt;!--</span> <span class="nx">footer</span><span class="p">.</span><span class="nx">wxml</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">view</span><span class="o">&gt;</span> <span class="nx">footer</span> <span class="o">&lt;</span><span class="sr">/view</span><span class="err">&gt;
</span></code></pre></div></div>

        <div class="page-footer">
          <div class="page-tag">
            <span>Tags:</span>
            
            <a href="/tags#Wechat" class="tag">| Wechat</a>
            
            <a href="/tags#视图层" class="tag">| 视图层</a>
            
          </div><!-- End Tags -->
          <div class="page-share">
            <span>Share:</span>
            <a href="https://twitter.com/intent/tweet?text=学习微信开发框架(五)&url=http://localhost:4000/kj5/" title="Share on Twitter" rel="nofollow" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
            <a href="https://facebook.com/sharer.php?u=http://localhost:4000/kj5/" title="Share on Facebook" rel="nofollow" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
            <a href="https://plus.google.com/share?url=http://localhost:4000/kj5/" title="Share on Google+" rel="nofollow" target="_blank"><i class="fa fa-google" aria-hidden="true"></i></a>
						
			<!-- JiaThis Button BEGIN -->
			<div class="jiathis_style_32x32">
				<a class="jiathis_button_weixin"></a>
				<a class="jiathis_button_tsina"></a>
				<!--<a class="jiathis_button_tqq"></a>
				<a class="jiathis_button_qzone"></a>
				<a class="jiathis_button_renren"></a>-->
				<a href="http://www.jiathis.com/share?uid=2157296" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
				<a class="jiathis_counter_style"></a>
			</div>
			<script type="text/javascript">var jiathis_config = {data_track_clickback:'true'};</script>
			<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=2157296" charset="utf-8"></script>
			<!-- JiaThis Button END -->
          </div><!-- End Share -->
		  
		
		  
		  <section>
			<!--<div style="background:#000;border-bottom: 1px solid #d9d9d9;"></div> -->

            <div class="content-play">
              <p><a href="javascript:void(0)" onclick="dashangToggle()" class="dashang" title="打赏，支持一下">打赏一下呗</a></p>
              <div class="hide_box-play"></div>
              <div class="shang_box-play">
                <a class="shang_close-play" href="javascript:void(0)" onclick="dashangToggle()" title="关闭"><img src="/assets/img/close.jpg" alt="取消" /></a>
                <div class="shang_tit-play">
                  <p>对你有帮助，那就打赏一下吧</p>
                </div>
				
				<div class="shang_payimg">    
                    <img src="/assets/img/wechatimg.jpg" alt="扫码支持" title="扫一扫"/>
                </div>
				
				 <div class="pay_item" data-id="weipay">
                    <span class="pay_logo"><img src="/assets/img/wechat.jpg" alt="微信" /></span>
                  </div>
				
                <div class="shang_payimg">
                    <img src="/assets/img/alipayimg.jpg" alt="扫码支持" title="扫一扫" />
                </div>
				
				 <div class="pay_item checked" data-id="alipay">
                    <span class="pay_logo"><img src="/assets/img/alipay.jpg" alt="支付宝" /></span>
                  </div>
				
                <div class="pay_explain">扫码打赏,金额随意</div>
               
              </div>
            </div>
            <script type="text/javascript">
            function dashangToggle(){
              $(".hide_box-play").fadeToggle();
              $(".shang_box-play").fadeToggle();
            }
            </script>

            <div style="text-align:center;margin:50px 0; font:normal 14px/24px 'MicroSoft YaHei';"></div>

            <style type="text/css">
              .content-play{width:100%;margin-top: 20px;margin-bottom: 10px;height:40px;text-align:center;}
              .hide_box-play{z-index:999;filter:alpha(opacity=50);background:#666;opacity: 0.5;-moz-opacity: 0.5;left:0;top:0;height:99%;width:100%;position:fixed;display:none;}
              .shang_box-play{width:100%;height:540px;padding:10px;background-color:#fff;border-radius:10px;position:fixed;z-index:1000;left:0%;top:50%;margin-left:0px;margin-top:-280px;border:1px dotted #dedede;display:none;}
              .shang_box-play img{border:none;border-width:0;}
              .dashang{width:100px;margin:5px auto;height:25px;line-height:25px;padding:10px;background-color:#E74851;color:#fff;text-align:center;text-decoration:none;border-radius:10px;font-weight:bold;font-size:16px;transition: all 0.3s;}
              .dashang:hover{opacity:0.8;padding:15px;font-size:18px;}
              .shang_close-play{float:right;display:inline-block;
                margin-right: 10px;margin-top: 20px;
              }
              .shang_logo{display:block;text-align:center;margin:20px auto;}
              .shang_tit-play{width: 100%;height: 75px;text-align: center;line-height: 66px;color: #a3a3a3;font-size: 16px;background: url('/images/payimg/cy-reward-title-bg.jpg');font-family: 'Microsoft YaHei';margin-top: 7px;margin-right:2px;}
              .shang_tit-play p{color:#a3a3a3;text-align:center;font-size:16px;}
              .shang_payimg{padding:10px;/*border:6px solid #EA5F00;**/margin:0 auto;border-radius:3px;height:140px;display:inline-block;}
              .shang_payimg img{display:inline-block;margin-right:10px;float:left;text-align:center;width:140px;height:140px; }
              .pay_explain{text-align:center;margin:10px auto;font-size:12px;color:#545454;}
              .shang_payselect{text-align:center;margin:0 auto;margin-top:40px;cursor:pointer;height:60px;width:500px;margin-left:110px;}
              .shang_payselect .pay_item{display:inline-block;margin-right:140px;float:left;}
              .shang_info-play{clear:both;}
              .shang_info-play p,.shang_info-play a{color:#C3C3C3;text-align:center;font-size:12px;text-decoration:none;line-height:2em;}
            </style>

       <ul class="pager">
	    
        <li class="previous">
            <a href="/kj6/" data-toggle="tooltip" data-placement="top" title="学习微信开发框架(六)">上一篇：  <span>学习微信开发框架(六)</span>
            </a>
        </li>
		
		<br><br>
		
        
        
        <li class="next">
            <a href="/kj4/" data-toggle="tooltip" data-placement="top" title="学习微信开发框架(四)">下一篇：  <span>学习微信开发框架(四)</span>
            </a>
        </li>
        
    </ul>
</section>

        </div>
		
		
        <section class="author-box">
  <img src="/assets/img/leach-face.jpg" alt="nldrs" class="author-img">
  <div class="author-desc">
    <h2>nldrs</h2>
    <p>码农，嘿说你呢！！？</p>
    <ul>
      
        <li class="email"><a href="mailto:lpfwch777@gmail.com"><i class="fa fa-envelope-o"></i></a></li>
      
      
        <li class="phone"><a href="tel:0"><i class="fa fa-phone"></i></a></li>
      
      <!--
        <li class="website"><a href="https://artemsheludko.github.io" target="_blank"><i class="fa fa-globe" aria-hidden="true"></i></a></li>
      
      
        <li class="twitter"><a href="https://twitter.com/artemsheludko_" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
      -->
    </ul>
  </div>
</section>

        <div class="recent-box">
  <h2 class="recent-title">Recent post</h2>
  <div class="recent-list">
    
      
        <a href="/mysql/" class="recent-item" style="background: url(/assets/img/lpf-9.jpg) center no-repeat; background-size: cover;"><span>mysql 介绍</span></a>
      
    
      
        <a href="/mondb2/" class="recent-item" style="background: url(/assets/img/lpf-8.jpg) center no-repeat; background-size: cover;"><span>mongoDB数据库的方法二</span></a>
      
    
      
        <a href="/mondb/" class="recent-item" style="background: url(/assets/img/lpf-7.jpg) center no-repeat; background-size: cover;"><span>mongoDB数据库的方法</span></a>
      
    
      
        <a href="/promise/" class="recent-item" style="background: url(/assets/img/lpf-6.jpg) center no-repeat; background-size: cover;"><span>promise</span></a>
      
    
  </div>
</div> <!-- End Recent-Box -->

        <div class="newsletter" id="mc_embed_signup" style="display:none">
  <h2 class="newsletter-title">Newsletter</h2>
  <div class="form-container">
    <p>Subscribe here to get our latest updates</p>
    <form action="//" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
      <label class="screen-reader-text" for="mce-EMAIL">Email Address</label>
      <div class="newsletter-box" id="mc_embed_signup_scroll">
        <input type="email" name="EMAIL" placeholder="Email address" class="email-input" id="mce-EMAIL" required>
        <input type="submit" value="Subscribe" name="subscribe" class="subscribe-btn" id="mc-embedded-subscribe">
      </div>
    </form>
  </div>
</div> <!-- End Newsletter -->

        <section class="comment-area">
  <div class="comment-wrapper">
   
	  <div id="disqus_thread" class="article-comments"></div>
	    <script>
			var idcomments_acct = '8b1583de29c0b1f23510ee43fce7d4e7';
			var idcomments_post_id;
			var idcomments_post_url;
		</script>
		<span id="IDCommentsPostTitle" style="display:none"></span>
		<script type='text/javascript' src='https://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>
	
  </div>
</section>
      </div>
    </div> <!-- End Wrapper -->
  </article>
  <div class="search-box">
  <div class="wrapper">
    <div class="search-grid">
      <form class="search-form">
        <div id="search-container">
          <input type="text" id="search-input" class="search" placeholder="Search">
        </div>
      </form>
      <ul id="results-container" class="results-search"  style="height:400px;overflow-y:scroll;overflow-y:auto;"></ul>
      <div class="icon-close-container">
        <span class="search-icon-close"><i class="fa fa-times" aria-hidden="true"></i></span>
      </div>
    </div>
  </div>
</div>

  <footer class="main-footer">
	<div class="footer-social">
		<div class="footer-container clearfix">
			<div class="social-list">
				<a class="social github" target="blank" href="https://github.com/nldrs">GitHub</a>
				<a class="social github" target="blank" href="https://www.jianshu.com/u/042fe873dc7c">简书</a>
				<a class="social github" target="blank" href="https://juejin.im/user/5a20a378f265da4311200031/collections">掘金</a>
				<a class="social github" target="blank" href="http://blog.csdn.net/">Csdn</a>
			</div>
		</div>
	</div>

	<div class="copyright">
		<p>2018 &copy; nldrs</p>
		
			
	<div style="font-size:12px;color:#B3B3B3;padding-right:30px;float:right"> 
		<iframe
                style="margin-left: 2px; margin-bottom:-5px;"
                frameborder="0" scrolling="0" width="91px" height="20px"
                src="https://ghbtns.com/github-btn.html?user=leach-chen&repo=leach-chen.github.io&type=star&count=true" >
            </iframe>
		<span id="busuanzi_container_site_pv">本站总访问量：<span id="busuanzi_value_site_pv"></span>次</span>
	</div>
	</div>

</footer> <!-- End Footer -->

</div>

  
  
<div class="top" title="Top"><i class="fa fa-chevron-up" aria-hidden="true"></i></div> <!-- End Top Scroll -->
  <!-- JS -->
<script src="/assets/js/jquery-3.2.1.min.js"></script>
<script src="/assets/js/jekyll-search.js"></script>
<script>
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/search.json',
    searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>',
    noResultsText: 'No results found',
    fuzzy: false,
    exclude: ['Welcome']
  });
</script>
<script src="/assets/js/main.js"></script>

  <!--<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

</body>
</html>
